{"version":3,"file":"truncate-zero.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * Remove tail zero.\n */\nfunction remove(s: string) {\n  let i = s.length;\n  for (; i--; i >= 0) {\n    if (s[i] !== '0') {\n      break;\n    }\n  }\n  if (s[i] === '.') {\n    i -= 1;\n  }\n\n  return s.substring(0, i + 1);\n}\n\n/**\n * Make number as short string by truncating ending zero characters and add suffixes: 1k, 2.2k, -45.1m...\n * @param num Number to be formatted\n * @param options (optional) input suffixes: k, m, b, t and the rounding function\n */\nexport default function truncateZero(\n  input: number,\n  options?: {\n    suffixes?: string[];\n  }\n): string {\n  const opts = Object.assign(\n    {},\n    {\n      suffixes: ['k', 'm', 'b', 't'],\n    },\n    options || {}\n  );\n\n  const { suffixes } = opts;\n  const num = Math.trunc(input);\n  const sign = Math.sign(num);\n  const strNum = String(Math.abs(num));\n  const len = strNum.length;\n\n  let pointPos = len % 3 === 0 ? Math.floor(len / 3) - 1 : Math.floor(len / 3);\n\n  if (pointPos > suffixes.length) {\n    pointPos = suffixes.length;\n  }\n\n  if (pointPos <= 0) {\n    return String(num);\n  } else {\n    const suffix = suffixes[pointPos - 1];\n\n    return (\n      (sign < 0 ? '-' : '') +\n      remove(\n        `${strNum.substring(0, len - pointPos * 3)}.${strNum.substring(\n          len - pointPos * 3\n        )}`\n      ) +\n      suffix\n    );\n  }\n}\n"],"names":["input","options","suffixes","Object","assign","num","Math","trunc","sign","strNum","String","abs","len","length","pointPos","floor","suffix","s","i","substring","remove"],"mappings":"6FAuBEA,EACAC,OAYQC,EARKC,OAAOC,OAClB,GACA,CACEF,SAAU,CAAC,IAAK,IAAK,IAAK,MAE5BD,GAAW,IAGLC,SACFG,EAAMC,KAAKC,MAAMP,GACjBQ,EAAOF,KAAKE,KAAKH,GACjBI,EAASC,OAAOJ,KAAKK,IAAIN,IACzBO,EAAMH,EAAOI,OAEfC,EAAWF,EAAM,GAAM,EAAIN,KAAKS,MAAMH,EAAM,GAAK,EAAIN,KAAKS,MAAMH,EAAM,MAEtEE,EAAWZ,EAASW,SACtBC,EAAWZ,EAASW,QAGlBC,GAAY,SACPJ,OAAOL,OAERW,EAASd,EAASY,EAAW,UAGhCN,EAAO,EAAI,IAAM,IAnDxB,SAAgBS,WACVC,EAAID,EAAEJ,OACHK,KACQ,MAATD,EAAEC,GADIA,GAAK,SAKJ,MAATD,EAAEC,KACJA,GAAK,GAGAD,EAAEE,UAAU,EAAGD,EAAI,GAyCtBE,CACKX,EAAOU,UAAU,EAAGP,EAAiB,EAAXE,OAAiBL,EAAOU,UACnDP,EAAiB,EAAXE,IAGVE"}