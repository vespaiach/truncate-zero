{"version":3,"file":"truncate-zero.esm.js","sources":["../src/index.ts"],"sourcesContent":["/**\n * Remove tail zero.\n */\nfunction remove(s: string) {\n  let i = s.length;\n  for (; i--; i >= 0) {\n    if (s[i] !== '0') {\n      break;\n    }\n  }\n  if (s[i] === '.') {\n    i -= 1;\n  }\n\n  return s.substring(0, i + 1);\n}\n\n/**\n * Make number as short string by truncating ending zero characters and add suffixes: 1k, 2.2k, -45.1m...\n * @param num Number to be formatted\n * @param options (optional) input suffixes: k, m, b, t and the rounding function\n */\nexport default function truncateZero(\n  input: number,\n  options?: {\n    suffixes?: string[];\n  }\n): string {\n  const opts = Object.assign(\n    {},\n    {\n      suffixes: ['k', 'm', 'b', 't'],\n    },\n    options || {}\n  );\n\n  const { suffixes } = opts;\n  const num = Math.trunc(input);\n  const sign = Math.sign(num);\n  const strNum = String(Math.abs(num));\n  const len = strNum.length;\n\n  let pointPos = len % 3 === 0 ? Math.floor(len / 3) - 1 : Math.floor(len / 3);\n\n  if (pointPos > suffixes.length) {\n    pointPos = suffixes.length;\n  }\n\n  if (pointPos <= 0) {\n    return String(num);\n  } else {\n    const suffix = suffixes[pointPos - 1];\n\n    return (\n      (sign < 0 ? '-' : '') +\n      remove(\n        `${strNum.substring(0, len - pointPos * 3)}.${strNum.substring(\n          len - pointPos * 3\n        )}`\n      ) +\n      suffix\n    );\n  }\n}\n"],"names":["remove","s","i","length","substring","truncateZero","input","options","opts","Object","assign","suffixes","num","Math","trunc","sign","strNum","String","abs","len","pointPos","floor","suffix"],"mappings":"AAAA;;;AAGA,SAASA,MAAT,CAAgBC,CAAhB;AACE,MAAIC,CAAC,GAAGD,CAAC,CAACE,MAAV;;AACA,SAAOD,CAAC,EAAR,EAAYA,CAAC,IAAI,CAAjB,EAAoB;AAClB,QAAID,CAAC,CAACC,CAAD,CAAD,KAAS,GAAb,EAAkB;AAChB;AACD;AACF;;AACD,MAAID,CAAC,CAACC,CAAD,CAAD,KAAS,GAAb,EAAkB;AAChBA,IAAAA,CAAC,IAAI,CAAL;AACD;;AAED,SAAOD,CAAC,CAACG,SAAF,CAAY,CAAZ,EAAeF,CAAC,GAAG,CAAnB,CAAP;AACD;AAED;;;;;;;SAKwBG,aACtBC,OACAC;AAIA,MAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CACX,EADW,EAEX;AACEC,IAAAA,QAAQ,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB;AADZ,GAFW,EAKXJ,OAAO,IAAI,EALA,CAAb;MAQQI,WAAaH,KAAbG;AACR,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWR,KAAX,CAAZ;AACA,MAAMS,IAAI,GAAGF,IAAI,CAACE,IAAL,CAAUH,GAAV,CAAb;AACA,MAAMI,MAAM,GAAGC,MAAM,CAACJ,IAAI,CAACK,GAAL,CAASN,GAAT,CAAD,CAArB;AACA,MAAMO,GAAG,GAAGH,MAAM,CAACb,MAAnB;AAEA,MAAIiB,QAAQ,GAAGD,GAAG,GAAG,CAAN,KAAY,CAAZ,GAAgBN,IAAI,CAACQ,KAAL,CAAWF,GAAG,GAAG,CAAjB,IAAsB,CAAtC,GAA0CN,IAAI,CAACQ,KAAL,CAAWF,GAAG,GAAG,CAAjB,CAAzD;;AAEA,MAAIC,QAAQ,GAAGT,QAAQ,CAACR,MAAxB,EAAgC;AAC9BiB,IAAAA,QAAQ,GAAGT,QAAQ,CAACR,MAApB;AACD;;AAED,MAAIiB,QAAQ,IAAI,CAAhB,EAAmB;AACjB,WAAOH,MAAM,CAACL,GAAD,CAAb;AACD,GAFD,MAEO;AACL,QAAMU,MAAM,GAAGX,QAAQ,CAACS,QAAQ,GAAG,CAAZ,CAAvB;AAEA,WACE,CAACL,IAAI,GAAG,CAAP,GAAW,GAAX,GAAiB,EAAlB,IACAf,MAAM,CACDgB,MAAM,CAACZ,SAAP,CAAiB,CAAjB,EAAoBe,GAAG,GAAGC,QAAQ,GAAG,CAArC,CADC,SAC0CJ,MAAM,CAACZ,SAAP,CAC5Ce,GAAG,GAAGC,QAAQ,GAAG,CAD2B,CAD1C,CADN,GAMAE,MAPF;AASD;AACF;;;;"}